<template>
  <div :class="{ disabled: !isSupported }" @click="proceed">
    <svg viewBox="0 0 90 20" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        class="letter"
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M2.08049 18.1867C0.693095 16.9778 0 15.3567 0 13.3239V0.384654H3.80059V13.0218C3.80059 15.0272 4.9383 16.2909 7.40746 16.2909C9.87659 16.2909 11.0137 15.0272 11.0137 13.0218V0.384654H14.842V13.3239C14.842 15.3567 14.1489 16.9778 12.7615 18.1867C11.3741 19.3955 9.59865 19.9997 7.40746 19.9997C5.24274 19.9997 3.46728 19.3955 2.08049 18.1867ZM31.1281 0.384486V4.01043H25.8848V19.6152H22.0559V4.01043H16.8402V0.384486H31.1281ZM41.3375 16.2911C43.113 16.2911 44.6111 15.7144 45.8042 14.5329C46.9972 13.3515 47.6073 11.8406 47.6073 9.99967C47.6073 8.15925 46.9972 6.64775 45.8042 5.4669C44.6111 4.28547 43.113 3.68074 41.3375 3.68074C39.5621 3.68074 38.064 4.28547 36.8709 5.4669C35.6779 6.64775 35.0678 8.15925 35.0678 9.99967C35.0678 11.8406 35.6779 13.3515 36.8709 14.5329C38.064 15.7144 39.5621 16.2911 41.3375 16.2911ZM41.3375 19.9999C38.5357 19.9999 36.1496 19.0382 34.1798 17.1151C32.2377 15.1645 31.2666 12.8022 31.2666 9.99967C31.2666 7.19767 32.2377 4.83479 34.1798 2.9116C36.1496 0.961592 38.5357 0 41.3375 0C44.1395 0 46.5255 0.961592 48.4954 2.9116C50.4652 4.83479 51.4361 7.19767 51.4361 9.99967C51.4361 12.8022 50.4652 15.1645 48.4954 17.1151C46.5255 19.0382 44.1395 19.9999 41.3375 19.9999ZM57.9563 3.92834V9.61508H61.8958C63.3386 9.61508 64.5317 8.32403 64.5317 6.75832C64.5317 5.192 63.3386 3.92834 61.8958 3.92834H57.9563ZM64.7807 19.6152L60.8694 12.9395H57.9563V19.6152H54.1273V0.384554H61.8958C63.699 0.384554 65.2247 1.01608 66.4732 2.25234C67.7216 3.48859 68.3599 4.9995 68.3599 6.75825C68.3599 9.14792 66.8618 11.3458 64.6147 12.3628L68.9146 19.6152H64.7807ZM90 9.28542V10.7689C90 13.5167 89.1118 15.7413 87.3363 17.4447C85.5608 19.1487 83.2585 20 80.4561 20C77.4599 20 74.9631 19.0384 72.9933 17.1152C71.0235 15.1647 70.0525 12.8018 70.0525 10.0272C70.0525 7.22521 71.0235 4.86233 72.9657 2.91173C74.9354 0.961133 77.3492 0.000136059 80.2347 0.000136059C83.8687 0.000136059 87.0313 1.75829 88.6961 4.47805L85.4231 6.34583C84.507 4.78012 82.5096 3.68089 80.2071 3.68089C78.3479 3.68089 76.8221 4.28561 75.6291 5.49446C74.436 6.6759 73.8537 8.18681 73.8537 10.0272C73.8537 11.8407 74.4637 13.3517 75.6568 14.5331C76.8775 15.7145 78.4863 16.2912 80.4844 16.2912C83.4529 16.2912 85.4501 14.9174 86.1431 12.6373H80.2617V9.28542H90Z"
        fill="black"
      ></path>
    </svg>
  </div>
</template>

<script lang="ts">
import Vue from "vue";
import { Address } from "zksync/build/types";
import { ZkEthereumNetworkName } from "@matterlabs/zksync-nuxt-core/types";

const utorgConfig = {
  url: "https://app.utorg.pro",
  sid: process.env.UTORG_MAINNET_SID,
};
export default Vue.extend({
  name: "ProviderUtorg",
  computed: {
    network(): ZkEthereumNetworkName {
      return this.$store.getters["zk-provider/network"];
    },
    isSupported(): boolean {
      return this.network === "mainnet";
    },
    address(): Address {
      return this.$store.getters["zk-account/address"];
    },
  },
  methods: {
    proceed(): void {
      if (!this.isSupported) {
        this.$emit("providerError", `Provider Utorg is not supported for the “${this.network}” network`);
        return;
      }
      this.$analytics.track("click_on_buy_with_utorg");
      window.open(`${utorgConfig!.url}/direct/${utorgConfig!.sid}/${this.address}/`);
    },
  },
});
</script>

<style lang="scss" scoped>
svg {
  width: 45%;
}
</style>
